define(["exports","./../dom.js","./../common/inputmanager.js","./../common/usersettings/usersettings.js","./../common/globalize.js","./../common/datetime.js","./../common/playback/playbackmanager.js","./../emby-apiclient/events.js","./../emby-apiclient/connectionmanager.js","./../layoutmanager.js","./../approuter.js","./../maintabsmanager.js","./../viewmanager/viewmanager.js","./../backdrop/backdrop.js","./../common/servicelocator.js","./../navdrawer/navdrawer.js","./../navdrawer/navdrawercontent.js","./../common/input/api.js","./../emby-elements/emby-button/paper-icon-button-light.js","./../emby-elements/emby-button/emby-button.js","./../common/methodtimer.js","./appheadercontent.js"],function(_exports,_dom,_inputmanager,_usersettings,_globalize,_datetime,_playbackmanager,_events,_connectionmanager,_layoutmanager,_approuter,_maintabsmanager,_viewmanager,_backdrop,_servicelocator,_navdrawer,_navdrawercontent,_api,_paperIconButtonLight,_embyButton,_methodtimer,_appheadercontent){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,require(["material-icons","css!modules/appheader/appheader.css"]);var headerLeft,headerHomeButton,headerMenuButton,headerBackButton,headerCastButton,headerHelpButton,headerSearchButton,headerSettingsButton,headerUserButton,selectedPlayerText,headerRight,currentServerId,isUserAdmin,headerMiddle,currentDrawerState,appFooter,bottomTabsLoaded,_scrollingElement,boundLayoutModeChangeFn,skinHeaderElement=document.querySelector(".skinHeader"),skinBodyElement=document.querySelector(".skinBody"),hasPhysicalBackButton=_servicelocator.appHost.supports("physicalbackbutton"),supportsFullscreenMediaQueries=_servicelocator.appHost.supports("fullscreenmediaqueries"),backgroundContainer=document.querySelector(".backgroundContainer"),decodingAttribute=_dom.default.supportsAsyncDecodedImages()?' decoding="async"':"",TranslateProperty=CSS.supports("translate","40px 100px")?"translate":CSS.supports("transform","scale(1)")?"transform":"-webkit-transform",docElem=document.documentElement,userSignedIn=!1,SupportsExternalLinks=_servicelocator.appHost.supports("externallinks")&&_servicelocator.appHost.supports("targetblank");function updateClock(){var clock=this.clockElement;clock&&(clock.innerHTML=_datetime.default.getDisplayTime(new Date).toLowerCase())}function onLocalUserSignedOut(e){userSignedIn=!1,headerSearchButton.classList.add("hide"),updateUserInHeader(null),setRemoteControlVisibility()}function ensureHeaderSettingsButton(){headerUserButton=headerUserButton||document.querySelector(".headerUserButton"),headerSettingsButton=headerSettingsButton||document.querySelector(".headerSettingsButton")}function updateUserInHeader(user){var userImageUrl;ensureHeaderSettingsButton(),user&&user.PrimaryImageTag&&(userImageUrl=function(user,apiClient,options){return(options=options||{}).type="Primary",user.PrimaryImageTag?(options.tag=user.PrimaryImageTag,apiClient.getUserImageUrl(user.Id,options)):null}(user,_connectionmanager.default.getApiClient(user.ServerId),{height:Math.round(.56*skinHeaderElement.offsetHeight)})),headerUserButton.innerHTML=userImageUrl?'<img draggable="false"'+decodingAttribute+' class="headerUserButtonImage paper-icon-button-img" src="'+userImageUrl+'" />':'<i class="md-icon">&#xe7FD;</i>',isUserAdmin=user?(headerUserButton.classList.remove("hide"),_layoutmanager.default.tv?headerSettingsButton.classList.add("hide"):headerSettingsButton.classList.remove("hide"),user.Policy.IsAdministrator):(headerUserButton.classList.add("hide"),headerSettingsButton.classList.add("hide"),!1)}function onUserUpdated(e,apiClient,data){apiClient.getCurrentUserId()===data.Id&&apiClient.serverId()===currentServerId&&updateUserInHeader(data)}function resetPremiereButton(){_servicelocator.appHost.supports("premiereinheader")&&_connectionmanager.default.currentApiClient()&&_connectionmanager.default.currentApiClient().serverId()&&userSignedIn&&Emby.importModule("./modules/registrationservices/registrationservices.js").then(function(registrationServices){registrationServices.validateFeature("themes",{viewOnly:!0,showDialog:!1}).then(removePremiereButton,addPremiereButton)})}function onPremiereButtonClick(){Emby.importModule("./modules/registrationservices/registrationservices.js").then(function(registrationServices){registrationServices.validateFeature("themes",{viewOnly:!0}).then(resetPremiereButton)})}function addPremiereButton(){var html='<button is="emby-button" class="raised raised-mini button-submit btnHeaderPremiere headerButton headerSectionItem" style="padding-top:.5em;padding-bottom:.5em;">'+_globalize.default.translate("HeaderBecomeProjectSupporter")+"</button>";document.querySelector(".btnHeaderPremiere")||(document.querySelector(".headerRight").insertAdjacentHTML("afterbegin",html),document.querySelector(".btnHeaderPremiere").addEventListener("click",onPremiereButtonClick))}function removePremiereButton(){var btn=document.querySelector(".btnHeaderPremiere");btn&&btn.remove()}function onLocalUserSignedIn(e,serverId,userId){currentServerId=serverId,userSignedIn=!0,_connectionmanager.default.getApiClient(serverId).getUser(userId).then(updateUserInHeader),resetPremiereButton(),setRemoteControlVisibility(),setSearchVisibility({})}function onHeaderMenuButtonClick(){_navdrawer.default.open()}function onHomeClick(){_approuter.default.goHome()}function onBackClick(e){_inputmanager.default.trigger("back",{sourceElement:_viewmanager.default.currentView(),originalEvent:e})}function onSearchClick(e){_inputmanager.default.trigger("search",{sourceElement:_viewmanager.default.currentView(),originalEvent:e})}function onUserButtonClick(){_approuter.default.showUserMenu({positionTo:this,positionY:"bottom",positionX:"right",transformOrigin:"right top"})}function onSettingsButtonClick(){var manageServerRouteUrl=_approuter.default.getRouteUrl("manageserver");if(!isUserAdmin||!_approuter.default.getRouteInfo(manageServerRouteUrl))return onUserButtonClick.call(this);_approuter.default.show(manageServerRouteUrl)}function onCastButtonClick(){var btn=this;Emby.importModule("./modules/playback/playerselection.js").then(function(playerSelectionMenu){playerSelectionMenu.show(btn)})}function onLayoutModeChange(){!_layoutmanager.default.tv&&_dom.default.allowBackdropFilter()?skinHeaderElement.classList.add("skinHeader-withbackdropfilter"):skinHeaderElement.classList.remove("skinHeader-withbackdropfilter"),ensureHeaderSettingsButton(),_layoutmanager.default.tv||headerUserButton.classList.contains("hide")?headerSettingsButton.classList.add("hide"):headerSettingsButton.classList.remove("hide"),_layoutmanager.default.tv?(headerRight.classList.add("secondaryText"),skinHeaderElement.classList.add("appHeader-tv")):(headerRight.classList.remove("secondaryText"),skinHeaderElement.classList.remove("appHeader-tv"),bottomTabsLoaded||(bottomTabsLoaded=!0,Emby.importModule("./modules/dockedtabs/dockedtabs.js"))),headerMiddle=headerMiddle||document.querySelector(".headerMiddle"),_layoutmanager.default.tv?headerMiddle.classList.add("headerMiddle-tv"):headerMiddle.classList.remove("headerMiddle-tv"),this.destroyClock(),this.loadClock(),setRemoteControlVisibility()}function updateCastIcon(){var info,btnCast=headerCastButton;btnCast&&((info=_playbackmanager.default.getPlayerInfo())&&!info.isLocalPlayer?(btnCast.innerHTML="&#xe308;",selectedPlayerText.innerHTML=info.deviceName||info.name):(btnCast.innerHTML="&#xe307;",selectedPlayerText.innerHTML=""))}function onNewPlayQueueStart(e,player,state){!function(state){return _layoutmanager.default.tv&&state.NowPlayingItem&&"Audio"===state.NowPlayingItem.MediaType}(state)||state.IsBackgroundPlayback||_approuter.default.showNowPlaying()}function setRemoteControlVisibility(){_servicelocator.appHost.supports("remotecontrol")&&!_layoutmanager.default.tv&&userSignedIn?(headerCastButton.classList.remove("hide"),selectedPlayerText.classList.remove("hide")):(headerCastButton.classList.add("hide"),selectedPlayerText.classList.add("hide"))}function setSearchVisibility(viewDetail){null!=currentDrawerState&&(!userSignedIn||!1===viewDetail.searchButton||"search"===(null==(viewDetail=viewDetail.params)?void 0:viewDetail.type)||!_layoutmanager.default.tv&&[1,2,3].includes(currentDrawerState)?headerSearchButton.classList.add("hide"):headerSearchButton.classList.remove("hide"))}function updateWindowScroll(detail){(elem=_scrollingElement)||(elem=document.scrollingElement||document.documentElement,_scrollingElement=elem);var elem;!0===detail.windowScroll?(elem.classList.remove("noScrollY"),elem.classList.add("overflowYScroll"),skinBodyElement.classList.add("skinBody-withWindowScroll"),skinHeaderElement.classList.add("headroom-scrolling"),skinHeaderElement.classList.remove("headroom-hidden")):(elem.classList.add("noScrollY"),elem.classList.remove("overflowYScroll"),skinBodyElement.classList.remove("skinBody-withWindowScroll"))}function onNavDrawerStateChange(e,drawerState){currentDrawerState=drawerState,appFooter=appFooter||document.querySelector(".appfooter"),3===drawerState?(headerHomeButton.classList.add("headerHomeButton-withdockeddrawer"),headerMenuButton.classList.add("headerMenuButton-withdockeddrawer"),backgroundContainer.classList.add("backgroundContainer-withdockeddrawer"),_viewmanager.default.addViewClass("page-withMiniDrawer","page-withDockedDrawer"),_viewmanager.default.removeViewClass("page-withFullDrawer"),docElem.classList.remove("withFullDrawer"),skinHeaderElement.classList.remove("skinHeader-withfulldrawer"),skinHeaderElement.classList.add("skinHeader-withminidrawer"),headerLeft.classList.add("headerLeft-withdockeddrawer"),appFooter&&(appFooter.classList.add("appfooter-withMiniDrawer"),appFooter.classList.remove("appfooter-withFullDrawer"))):2===drawerState?(headerHomeButton.classList.add("headerHomeButton-withdockeddrawer"),headerMenuButton.classList.add("headerMenuButton-withdockeddrawer"),backgroundContainer.classList.add("backgroundContainer-withdockeddrawer"),docElem.classList.add("withFullDrawer"),_viewmanager.default.addViewClass("page-withFullDrawer","page-withDockedDrawer"),_viewmanager.default.removeViewClass("page-withMiniDrawer"),skinHeaderElement.classList.add("skinHeader-withfulldrawer"),headerLeft.classList.add("headerLeft-withdockeddrawer"),skinHeaderElement.classList.remove("skinHeader-withminidrawer"),appFooter&&(appFooter.classList.add("appfooter-withFullDrawer"),appFooter.classList.remove("appfooter-withMiniDrawer"))):1===drawerState?3===_navdrawer.default.closeState?(headerHomeButton.classList.add("headerHomeButton-withdockeddrawer"),headerMenuButton.classList.add("headerMenuButton-withdockeddrawer"),backgroundContainer.classList.add("backgroundContainer-withdockeddrawer"),docElem.classList.remove("withFullDrawer"),skinHeaderElement.classList.remove("skinHeader-withfulldrawer"),_viewmanager.default.removeViewClass("page-withFullDrawer"),_viewmanager.default.addViewClass("page-withMiniDrawer","page-withDockedDrawer"),skinHeaderElement.classList.add("skinHeader-withminidrawer"),headerLeft.classList.add("headerLeft-withdockeddrawer"),appFooter&&(appFooter.classList.remove("appfooter-withFullDrawer"),appFooter.classList.add("appfooter-withMiniDrawer"))):(headerHomeButton.classList.remove("headerHomeButton-withdockeddrawer"),headerMenuButton.classList.remove("headerMenuButton-withdockeddrawer"),backgroundContainer.classList.remove("backgroundContainer-withdockeddrawer"),docElem.classList.remove("withFullDrawer"),_viewmanager.default.removeViewClass("page-withMiniDrawer","page-withDockedDrawer","page-withFullDrawer"),skinHeaderElement.classList.remove("skinHeader-withfulldrawer","skinHeader-withminidrawer"),headerLeft.classList.remove("headerLeft-withdockeddrawer"),appFooter&&appFooter.classList.remove("appfooter-withMiniDrawer","appfooter-withFullDrawer")):(docElem.classList.remove("withFullDrawer"),_viewmanager.default.removeViewClass("page-withMiniDrawer","page-withDockedDrawer","page-withFullDrawer"),skinHeaderElement.classList.remove("skinHeader-withfulldrawer","skinHeader-withminidrawer"),headerLeft.classList.remove("headerLeft-withdockeddrawer"),backgroundContainer.classList.remove("backgroundContainer-withdockeddrawer"),headerHomeButton.classList.remove("headerHomeButton-withdockeddrawer"),headerMenuButton.classList.remove("headerMenuButton-withdockeddrawer"),appFooter&&appFooter.classList.remove("appfooter-withMiniDrawer","appfooter-withFullDrawer"));drawerState=_viewmanager.default.currentViewInfo();drawerState&&setSearchVisibility(drawerState)}function onViewShow(e){var _detail$params,detail=e.detail;"true"===(null==(_detail$params=detail.params)?void 0:_detail$params.asDialog)||(detail.clearBackdrop&&_backdrop.default.clear(),_detail$params=function(detail){if(!1===detail.drawer)return!1;if(!userSignedIn)return!1;if(detail.hideDrawerWithOtherUserIdParam){detail=detail.params;if(detail&&detail.userId&&detail.serverId){var apiClient=_connectionmanager.default.getApiClient(detail.serverId);if(apiClient&&apiClient.getCurrentUserId()!==detail.userId)return!1}}return!0}(detail),function(detail,drawerAllowed){drawerAllowed&&!_layoutmanager.default.tv&&("docked"===(drawerAllowed=detail.settingsTheme?"docked":_usersettings.default.drawerStyle())||"docked-mini"===drawerAllowed)?(_layoutmanager.default.tv&&(drawerAllowed="docked-mini"),detail.drawerInline=!0,_navdrawer.default.open(!0,"docked-mini"===drawerAllowed)):(_navdrawer.default.closeState=null,_navdrawer.default.close())}(detail,_detail$params),function(detail){var backButtonConfig=detail.backButton;!1===(backButtonConfig=null==backButtonConfig&&detail.headerTabs?!1:backButtonConfig)||!_approuter.default.canGoBack()||hasPhysicalBackButton&&!0!==backButtonConfig&&!_layoutmanager.default.tv?headerBackButton.classList.add("hide"):!supportsFullscreenMediaQueries||!0===backButtonConfig||_layoutmanager.default.tv?headerBackButton.classList.remove("headerBackButton-showfullscreen","hide"):(headerBackButton.classList.add("headerBackButton-showfullscreen"),headerBackButton.classList.remove("hide"))}(detail),function(detail){userSignedIn&&!1!==detail.homeButton?headerHomeButton.classList.remove("hide"):headerHomeButton.classList.add("hide")}(detail),setSearchVisibility(detail),function(drawerAllowed){!_layoutmanager.default.tv&&userSignedIn&&drawerAllowed?headerMenuButton.classList.remove("hide"):headerMenuButton.classList.add("hide")}(_detail$params),function(detail){(detail=detail.helpUrl)&&SupportsExternalLinks?(headerHelpButton.href=detail,headerHelpButton.classList.remove("hide")):headerHelpButton.classList.add("hide")}(detail),function(detail){!_layoutmanager.default.tv&&detail.adjustHeaderForEmbeddedScroll?skinHeaderElement.classList.add("adjustHeaderForEmbeddedScroll"):skinHeaderElement.classList.remove("adjustHeaderForEmbeddedScroll")}(detail),function(detail){!1===detail.secondaryHeaderFeatures?headerRight.classList.add("hide"):headerRight.classList.remove("hide")}(detail,e.target),function(header,detail){detail.defaultTitle?header.setDefaultTitle():null!=(detail=detail.title)&&header.setTitle(_globalize.default.translate(detail))}(this,detail,e.target),(_detail$params=(_detail$params=this).pageTitleElement)&&(_layoutmanager.default.tv?_detail$params.classList.add("pageTitle-marginstart"):_detail$params.classList.remove("pageTitle-marginstart")),_navdrawer.default.onViewShow(e),detail.isRestored)||!0!==detail.windowScroll||window.scrollTo(0,0)}function removeTransformFromHeader(){skinHeaderElement.style[TranslateProperty]="none"}function onViewBeforeShow(e){var _detail$params2,detail=e.detail;"true"!==(null==(_detail$params2=detail.params)?void 0:_detail$params2.asDialog)&&(e.target,detail.headerTabs||_maintabsmanager.default.setTabs(null),_detail$params2=skinHeaderElement,!1===detail.headerBackground?_detail$params2.classList.remove("skinHeader-withBackground"):_detail$params2.classList.add("skinHeader-withBackground"),detail.adjustHeaderForEmbeddedScroll&&!0!==detail.windowScroll||removeTransformFromHeader(),updateWindowScroll(detail),this.setTransparent(detail.transparentHeader))}function shouldShowLeftNav(e){var _viewManager$currentV;return!1!==(null==(_viewManager$currentV=_viewmanager.default.currentViewInfo())?void 0:_viewManager$currentV.drawer)&&(null==(_viewManager$currentV=e.detail)||null==(_viewManager$currentV=_viewManager$currentV.originalEvent)||!_viewManager$currentV.repeat)}function onHeaderCommand(e){switch(e.detail.command){case"moveleftedge":"rtl"!==document.dir&&shouldShowLeftNav(e)&&(_navdrawer.default.openIfClosed(!0),e.preventDefault());break;case"moverightedge":"rtl"===document.dir&&shouldShowLeftNav(e)&&(_navdrawer.default.openIfClosed(!0),e.preventDefault())}}function render(instance){var Back,Home,Menu,Help;instance.element=skinHeaderElement,headerLeft=skinHeaderElement.querySelector(".headerLeft"),Menu=_globalize.default.translate("Menu"),Home=_globalize.default.translate("Home"),Back=_globalize.default.translate("Back"),Help=_globalize.default.translate("Help"),headerLeft.innerHTML='\n            <button type="button" is="paper-icon-button-light" class="headerBackButton headerButton headerSectionItem hide-mouse-idle-tv hide" tabindex="-1" title="'.concat(Back,'" aria-label="').concat(Back,'">\n                <i class="md-icon autortl">&#xe2ea;</i>\n            </button>\n            <button type="button" is="paper-icon-button-light" class="headerHomeButton headerButton headerSectionItem hide-mouse-idle-tv hide md-icon md-icon-fill" tabindex="-1" title="').concat(Home,'" aria-label="').concat(Home,'">\n                &#xe88a;\n            </button>\n            <button type="button" is="paper-icon-button-light" class="headerMenuButton headerButton headerSectionItem hide md-icon" title="').concat(Menu,'" aria-label="').concat(Menu,'">\n                &#xe5D2;\n            </button>\n            <h2 class="pageTitle headerSectionItem">&nbsp;</h2>\n\n            <a type="button" is="emby-linkbutton" class="paper-icon-button-light headerHelpButton dialogHeaderButton button-help headerButton headerSectionItem hide secondaryText" title="').concat(Help,'" aria-label="').concat(Help,'" target="_blank" href="#">\n                <i class="md-icon autortl-arabic">&#xe887;</i>\n            </a>\n        '),Back=_globalize.default.translate("ManageEmbyServer"),Home=_globalize.default.translate("Settings"),Menu=_globalize.default.translate("Search"),Help=_globalize.default.translate("PlayOnAnotherDevice"),skinHeaderElement.querySelector(".headerRight").innerHTML='\n            <div class="headerSelectedPlayer headerSectionItem hide">\n\n            </div>\n            <button type="button" is="paper-icon-button-light" class="headerCastButton headerButton hide headerSectionItem md-icon hide" title="'.concat(Help,'" aria-label="').concat(Help,'">\n                &#xe307;\n            </button>\n            <button type="button" is="paper-icon-button-light" class="headerSearchButton headerButton hide headerSectionItem md-icon hide" title="').concat(Menu,'" aria-label="').concat(Menu,'">\n                &#xe8B6;\n            </button>\n            <button type="button" is="paper-icon-button-light" class="headerUserButton headerButton headerSectionItem hide" title="').concat(Home,'" aria-label="').concat(Home,'">\n                <i class="md-icon largeIcon">&#xe7FD;</i>\n            </button>\n            <button type="button" is="paper-icon-button-light" class="headerSettingsButton headerButton headerSectionItem md-icon hide" title="').concat(Back,'" aria-label="').concat(Back,'">\n                &#xe8B8;\n            </button>\n            <div class="headerClock headerSectionItem hide"></div>\n        '),function(instance){var parent=instance.element;headerBackButton=parent.querySelector(".headerBackButton"),headerHomeButton=parent.querySelector(".headerHomeButton"),headerMenuButton=parent.querySelector(".headerMenuButton"),headerCastButton=parent.querySelector(".headerCastButton"),headerHelpButton=parent.querySelector(".headerHelpButton"),headerSearchButton=parent.querySelector(".headerSearchButton"),selectedPlayerText=parent.querySelector(".headerSelectedPlayer"),headerRight=parent.querySelector(".headerRight"),headerBackButton.addEventListener("click",onBackClick),headerHomeButton.addEventListener("click",onHomeClick),headerSearchButton.addEventListener("click",onSearchClick),headerCastButton.addEventListener("click",onCastButtonClick),parent.querySelector(".headerUserButton").addEventListener("click",onUserButtonClick),parent.querySelector(".headerSettingsButton").addEventListener("click",onSettingsButtonClick),headerMenuButton.addEventListener("click",onHeaderMenuButtonClick),boundLayoutModeChangeFn=onLayoutModeChange.bind(instance),_events.default.on(_layoutmanager.default,"modechange",boundLayoutModeChangeFn),_events.default.on(_playbackmanager.default,"playerchange",updateCastIcon),_events.default.on(_playbackmanager.default,"playqueuestart",onNewPlayQueueStart),_events.default.on(_connectionmanager.default,"localusersignedin",onLocalUserSignedIn),_events.default.on(_connectionmanager.default,"localusersignedout",onLocalUserSignedOut),_events.default.on(_api.default,"UserUpdated",onUserUpdated),document.addEventListener("viewbeforeshow",onViewBeforeShow.bind(instance)),document.addEventListener("viewshow",onViewShow.bind(instance)),_inputmanager.default.on(skinHeaderElement,onHeaderCommand),instance.pageTitleElement=parent.querySelector(".pageTitle"),resetPremiereButton(),_events.default.on(_connectionmanager.default,"resetregistrationinfo",resetPremiereButton)}(instance),setRemoteControlVisibility(),onLayoutModeChange.call(instance),_events.default.on(_navdrawer.default,"drawer-state-change",onNavDrawerStateChange),_events.default.on(_navdrawercontent.default,"dynamic-title",function(e,title){this.setTitle(title)}.bind(instance))}function AppHeader(){}AppHeader.prototype.init=function(){return render(this)},AppHeader.prototype.stopClockInterval=function(){var interval=this.clockInterval;interval&&(interval.destroy(),this.clockInterval=null)},AppHeader.prototype.startClockInterval=function(){this.clockInterval=new _methodtimer.default({onInterval:updateClock.bind(this),timeoutMs:5e4,type:"interval"})},AppHeader.prototype.loadClock=function(){var elem;_layoutmanager.default.tv?((elem=document.querySelector(".headerClock")).classList.remove("hide"),this.clockElement=elem,this.stopClockInterval(),this.startClockInterval(),updateClock.call(this)):this.destroyClock()};var defaultDocumentTitle=document.title||"Emby";AppHeader.prototype.setDefaultTitle=function(){var pageTitleElement=this.pageTitleElement;pageTitleElement&&(pageTitleElement.classList.add("pageTitleWithLogo","pageTitleWithDefaultLogo"),pageTitleElement.style.backgroundImage=null,pageTitleElement.innerHTML=""),document.title=defaultDocumentTitle},AppHeader.prototype.setTitle=function(title){var html,pageTitleElement;null==title?this.setDefaultTitle():(html=function(title){return title?"string"!=typeof title?title.Name||"":title:""}(title="-"===title?"":title),(pageTitleElement=this.pageTitleElement)&&(pageTitleElement.classList.remove("pageTitleWithLogo","pageTitleWithDefaultLogo"),pageTitleElement.style.backgroundImage=null,pageTitleElement.innerHTML=html||""),document.title=title?"string"==typeof title?title:title.Name||defaultDocumentTitle:defaultDocumentTitle)},AppHeader.prototype.setLogoTitle=function(options){var pageTitleElement;if(!(url=options.url))for(var items=options.items,i=0,length=items.length;i<length;i++){var url,item=items[i];if(url=_connectionmanager.default.getApiClient(item).getLogoImageUrl(item,{maxHeight:_appheadercontent.default.getHeight()||100},options.preferredLogoImageTypes))break}url?(document.title=options.titleText||defaultDocumentTitle,(pageTitleElement=this.pageTitleElement).style.backgroundImage="url('"+url+"')",pageTitleElement.classList.add("pageTitleWithLogo"),pageTitleElement.classList.remove("pageTitleWithDefaultLogo"),pageTitleElement.innerHTML=""):this.setTitle(options.titleText)},AppHeader.prototype.setTransparent=function(transparent){transparent?skinHeaderElement.classList.add("semiTransparent","darkContentContainer"):skinHeaderElement.classList.remove("semiTransparent","darkContentContainer")},AppHeader.prototype.hasFocus=function(){var activeElement=document.activeElement;return!!activeElement&&this.element.contains(activeElement)},AppHeader.prototype.ensureVisible=function(){removeTransformFromHeader()},AppHeader.prototype.destroyClock=function(){this.stopClockInterval();var elem=this.clockElement;elem&&elem.classList.add("hide"),this.clockElement=null},AppHeader.prototype.destroy=function(){var instance;this.destroyClock(),(instance=(instance=this).element)&&(instance.querySelector(".headerBackButton").removeEventListener("click",onBackClick),instance.querySelector(".headerHomeButton").removeEventListener("click",onHomeClick),instance.querySelector(".headerSearchButton").removeEventListener("click",onSearchClick),instance.querySelector(".headerCastButton").removeEventListener("click",onCastButtonClick),instance.querySelector(".headerUserButton").removeEventListener("click",onUserButtonClick),instance.querySelector(".headerSettingsButton").removeEventListener("click",onSettingsButtonClick),instance.querySelector(".headerMenuButton").removeEventListener("click",onHeaderMenuButtonClick)),_events.default.off(_layoutmanager.default,"modechange",boundLayoutModeChangeFn),_events.default.off(_playbackmanager.default,"playerchange",updateCastIcon),_events.default.off(_playbackmanager.default,"playqueuestart",onNewPlayQueueStart),_events.default.off(_connectionmanager.default,"localusersignedin",onLocalUserSignedIn),_events.default.off(_connectionmanager.default,"localusersignedout",onLocalUserSignedOut),_events.default.off(_api.default,"UserUpdated",onUserUpdated),_events.default.off(_connectionmanager.default,"resetregistrationinfo",resetPremiereButton),document.removeEventListener("viewbeforeshow",onViewBeforeShow),document.removeEventListener("viewshow",onViewShow),this.element=null};_exports.default=new AppHeader});