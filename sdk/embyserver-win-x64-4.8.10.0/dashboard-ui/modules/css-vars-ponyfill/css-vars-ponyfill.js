define(["exports"],function(_exports){function getUrls(urls,argument_1){var options=1<arguments.length&&void 0!==argument_1?argument_1:{},settings={mimeType:options.mimeType||null,onBeforeSend:options.onBeforeSend||Function.prototype,onSuccess:options.onSuccess||Function.prototype,onError:options.onError||Function.prototype,onComplete:options.onComplete||Function.prototype},urlArray=Array.isArray(urls)?urls:[urls],urlQueue=Array.apply(null,Array(urlArray.length)).map(function(x){return null});function isValidCss(text){var isString="string"==typeof text,text=isString&&"<"===text.trim().charAt(0);return isString&&!text}function onSuccess(responseText,urlIndex){var returnVal=settings.onSuccess(responseText,urlArray[urlIndex],urlIndex);urlQueue[urlIndex]=responseText=!1===returnVal?"":returnVal||responseText,-1===urlQueue.indexOf(null)&&settings.onComplete(urlQueue)}var parser=document.createElement("a");urlArray.forEach(function(url,i){parser.setAttribute("href",url),parser.href=String(parser.href);var xhr=new XMLHttpRequest;xhr.open("GET",url),settings.mimeType&&xhr.overrideMimeType&&xhr.overrideMimeType(settings.mimeType),settings.onBeforeSend(xhr,url,i),xhr.onreadystatechange=function(){var text;4===xhr.readyState&&(text=xhr.responseText,xhr.status<400&&isValidCss(text)||0===xhr.status&&isValidCss(text)?onSuccess(text,i):function(xhr,urlIndex){settings.onError(xhr,urlArray[urlIndex],urlIndex)}(xhr,i))},xhr.send()})}function getCssData(options){var regex={cssComments:/\/\*[\s\S]+?\*\//g,cssImports:/(?:@import\s*)(?:url\(\s*)?(?:['"])([^'"]*)(?:['"])(?:\s*\))?(?:[^;]*;)/g},settings={rootElement:options.rootElement||document,include:options.include||'style,link[rel="stylesheet"]',skipDisabled:!1!==options.skipDisabled,useCSSOM:options.useCSSOM||!1,onBeforeSend:options.onBeforeSend||Function.prototype,onSuccess:options.onSuccess||Function.prototype,onError:options.onError||Function.prototype,onComplete:options.onComplete||Function.prototype},sourceNodes=settings.include,cssArray=Array.apply(null,Array(sourceNodes.length)).map(function(x){return null});function handleComplete(){var cssText;-1===cssArray.indexOf(null)&&(cssArray.reduce(function(skipIndices,value,i){return""===value&&skipIndices.push(i),skipIndices},[]).reverse().forEach(function(skipIndex){return[sourceNodes,cssArray].forEach(function(arr){return arr.splice(skipIndex,1)})}),cssText=cssArray.join(""),settings.onComplete(cssText,cssArray,sourceNodes))}function handleSuccess(cssText,cssIndex,node,sourceUrl){var returnVal=settings.onSuccess(cssText,node,sourceUrl);!function resolveImports(cssText,node,baseUrl,callbackFn){var __errorData=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[];var __errorRules=5<arguments.length&&void 0!==arguments[5]?arguments[5]:[];var importData=parseImportData(cssText,baseUrl,__errorRules);importData.rules.length?getUrls(importData.absoluteUrls,{onBeforeSend:function(xhr,url,urlIndex){settings.onBeforeSend(xhr,node,url)},onSuccess:function(cssText,url,urlIndex){var returnVal=settings.onSuccess(cssText,node,url),responseImportData=parseImportData(cssText=!1===returnVal?"":returnVal||cssText,url,__errorRules);return responseImportData.rules.forEach(function(rule,i){cssText=cssText.replace(rule,responseImportData.absoluteRules[i])}),cssText},onError:function(xhr,url,urlIndex){__errorData.push({xhr:xhr,url:url}),__errorRules.push(importData.rules[urlIndex]),resolveImports(cssText,node,baseUrl,callbackFn,__errorData,__errorRules)},onComplete:function(responseArray){responseArray.forEach(function(importText,i){cssText=cssText.replace(importData.rules[i],importText)}),resolveImports(cssText,node,baseUrl,callbackFn,__errorData,__errorRules)}}):callbackFn(cssText,__errorData)}(cssText=void 0!==returnVal&&!1===Boolean(returnVal)?"":returnVal||cssText,node,sourceUrl,function(resolvedCssText,errorData){null===cssArray[cssIndex]&&(errorData.forEach(function(data){return settings.onError(data.xhr,node,data.url)}),cssArray[cssIndex]=resolvedCssText,handleComplete())})}function parseImportData(cssText,baseUrl,argument_2){var ignoreRules=2<arguments.length&&void 0!==argument_2?argument_2:[],importData={};return importData.rules=(cssText.replace(regex.cssComments,"").match(regex.cssImports)||[]).filter(function(rule){return-1===ignoreRules.indexOf(rule)}),importData.urls=importData.rules.map(function(rule){return rule.replace(regex.cssImports,"$1")}),importData.absoluteUrls=importData.urls.map(function(url){return getFullUrl$1(url,baseUrl)}),importData.absoluteRules=importData.rules.map(function(rule,i){var oldUrl=importData.urls[i],i=getFullUrl$1(importData.absoluteUrls[i],baseUrl);return rule.replace(oldUrl,i)}),importData}sourceNodes.length?sourceNodes.forEach(function(node,i){var linkHref=node.getAttribute("href"),linkRel=node.getAttribute("rel"),linkRel="link"===node.nodeName.toLowerCase()&&linkHref&&linkRel&&-1!==linkRel.toLowerCase().indexOf("stylesheet"),isSkip=!1!==settings.skipDisabled&&node.disabled,isStyle="style"===node.nodeName.toLowerCase();linkRel&&!isSkip?getUrls(linkHref,{mimeType:"text/css",onBeforeSend:function(xhr,url,urlIndex){settings.onBeforeSend(xhr,node,url)},onSuccess:function(cssText,url,urlIndex){var sourceUrl=getFullUrl$1(linkHref);handleSuccess(cssText,i,node,sourceUrl)},onError:function(xhr,url,urlIndex){cssArray[i]="",settings.onError(xhr,node,url),handleComplete()}}):isStyle&&!isSkip?(linkRel=node.textContent,handleSuccess(linkRel=settings.useCSSOM?Array.apply(null,node.sheet.cssRules).map(function(rule){return rule.cssText}).join(""):linkRel,i,node,location.href)):(cssArray[i]="",handleComplete())}):settings.onComplete("",[])}function getFullUrl$1(url,base){var d=document.implementation.createHTMLDocument(""),b=d.createElement("base"),a=d.createElement("a");return d.head.appendChild(b),d.body.appendChild(a),b.href=base||document.baseURI||(document.querySelector("base")||{}).href||location.href,a.href=url,a.href}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0;var balancedMatch=balanced;function balanced(a,b,str){var r=range(a=a instanceof RegExp?maybeMatch(a,str):a,b=b instanceof RegExp?maybeMatch(b,str):b,str);return r&&{start:r[0],end:r[1],pre:str.slice(0,r[0]),body:str.slice(r[0]+a.length,r[1]),post:str.slice(r[1]+b.length)}}function maybeMatch(reg,str){str=str.match(reg);return str?str[0]:null}function range(a,b,str){var begs,beg,left,right,result,ai=str.indexOf(a),bi=str.indexOf(b,ai+1),i=ai;if(0<=ai&&0<bi){if(a===b)return[ai,bi];for(begs=[],left=str.length;0<=i&&!result;)i===ai?(begs.push(i),ai=str.indexOf(a,i+1)):1===begs.length?result=[begs.pop(),bi]:((beg=begs.pop())<left&&(left=beg,right=bi),bi=str.indexOf(b,i+1)),i=ai<bi&&0<=ai?ai:bi;begs.length&&(result=[left,right])}return result}function parseCss(css,argument_1){var settings=Object.assign({},{removeComments:!1},1<arguments.length&&void 0!==argument_1?argument_1:{});function error(msg){throw new Error("CSS parse error: ".concat(msg))}function match(re){re=re.exec(css);if(re)return css=css.slice(re[0].length),re}function open(){return match(/^{\s*/)}function close(){return match(/^}/)}function whitespace(){match(/^\s*/)}function comments(){for(var c,cmnts=[];c=function(){if(whitespace(),"/"===css[0]&&"*"===css[1]){for(var str,i=2;css[i]&&("*"!==css[i]||"/"!==css[i+1]);)i++;return css[i]?(str=css.slice(2,i),css=css.slice(i+2),{type:"comment",comment:str}):error("end of comment is missing")}}();)cmnts.push(c);return settings.removeComments?[]:cmnts}function selector(){for(whitespace();"}"===css[0];)error("extra closing bracket");var hasCommaInQuotes,m=match(/^(("(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^{])+)/);if(m)return m=m[0].trim(),/\/\*/.test(m)&&(m=m.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"")),(hasCommaInQuotes=/["']\w*,\w*["']/.test(m))&&(m=m.replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(m){return m.replace(/,/g,"â€Œ")})),m=/,/.test(m)?m.split(/\s*(?![^(]*\)),\s*/):[m],hasCommaInQuotes?m.map(function(s){return s.replace(/\u200C/g,",")}):m}function declarations(){if(!open())return error("missing '{'");for(var d,decls=comments();d=function(){if("@"===css[0])return at_rule();match(/^([;\s]*)+/);var val,comment_regexp=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,prop=match(/^(\*?[-#/*\\\w.]+(\[[0-9a-z_-]+\])?)\s*/);return prop?(prop=prop[0].trim(),match(/^:\s*/)?(val=match(/^((?:\/\*.*?\*\/|'(?:\\'|.)*?'|"(?:\\"|.)*?"|\((\s*'(?:\\'|.)*?'|"(?:\\"|.)*?"|[^)]*?)\s*\)|[^};])+)/),prop={type:"declaration",property:prop.replace(comment_regexp,""),value:val?val[0].replace(comment_regexp,"").trim():""},match(/^[;\s]*/),prop):error("property missing ':'")):void 0}();)decls.push(d),decls=decls.concat(comments());return close()?decls:error("missing '}'")}function at_keyframes(){if(m=match(/^@([-\w]+)?keyframes\s*/)){var vendor=m[1];if(!(m=match(/^([-\w]+)\s*/)))return error("@keyframes missing name");var frame,m=m[1];if(!open())return error("@keyframes missing '{'");for(var frames=comments();frame=function(){whitespace();for(var m,vals=[];m=match(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)vals.push(m[1]),match(/^,\s*/);if(vals.length)return{type:"keyframe",values:vals,declarations:declarations()}}();)frames.push(frame),frames=frames.concat(comments());return close()?{type:"keyframes",name:m,vendor:vendor,keyframes:frames}:error("@keyframes missing '}'")}}function at_rule(){if(whitespace(),"@"===css[0])return function(){var m=match(/^@(import|charset|namespace)\s*([^;]+);/);if(m)return{type:m[1],name:m[2].trim()}}()||function(){if(match(/^@font-face\s*/))return{type:"font-face",declarations:declarations()}}()||function(){var m=match(/^@media([^{]+)*/);if(m)return{type:"media",media:(m[1]||"").trim(),rules:rules()}}()||at_keyframes()||function(){var m=match(/^@supports *([^{]+)/);if(m)return{type:"supports",supports:m[1].trim(),rules:rules()}}()||function(){var m=match(/^@container *([^{]+)/);if(m)return{type:"container",container:m[1].trim(),rules:rules()}}()||function(){var m=match(/^@([-\w]+)?document *([^{]+)/);if(m)return{type:"document",document:m[2].trim(),vendor:m[1]?m[1].trim():null,rules:rules()}}()||function(){var m=match(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(m)return{type:"custom-media",name:m[1].trim(),media:m[2].trim()}}()||function(){if(match(/^@host\s*/))return{type:"host",rules:rules()}}()||function(){if(match(/^@page */))return{type:"page",selectors:selector()||[],declarations:declarations()}}()||function(){var m=match(/@(top|bottom|left|right)-(left|center|right|top|middle|bottom)-?(corner)?\s*/);if(m)return{type:"page-margin-box",name:"".concat(m[1],"-").concat(m[2])+(m[3]?"-".concat(m[3]):""),declarations:declarations()}}()}function rules(core){if(!core&&!open())return error("missing '{'");for(var sel,decls,rules=comments();css.length&&(core||"}"!==css[0])&&(sel=at_rule()||(decls=sel=void 0,sel=selector()||[],decls=declarations(),sel.length||error("selector missing"),{type:"rule",selectors:sel,declarations:decls}));)sel.type&&rules.push(sel),rules=rules.concat(comments());return core||close()?rules:error("missing '}'")}return{type:"stylesheet",stylesheet:{rules:rules(!0),errors:[]}}}function stringifyCss(tree,argument_1,argument_2){var delim=1<arguments.length&&void 0!==argument_1?argument_1:"",cb=2<arguments.length?argument_2:void 0,renderMethods={charset:function(node){return"@charset "+node.name+";"},comment:function(node){return 0===node.comment.indexOf("__CSSVARSPONYFILL")?"/*"+node.comment+"*/":""},"custom-media":function(node){return"@custom-media "+node.name+" "+node.media+";"},declaration:function(node){return node.property+":"+node.value+";"},document:function(node){return"@"+(node.vendor||"")+"document "+node.document+"{"+visit(node.rules)+"}"},"font-face":function(node){return"@font-face{"+visit(node.declarations)+"}"},host:function(node){return"@host{"+visit(node.rules)+"}"},import:function(node){return"@import "+node.name+";"},keyframe:function(node){return node.values.join(",")+"{"+visit(node.declarations)+"}"},keyframes:function(node){return"@"+(node.vendor||"")+"keyframes "+node.name+"{"+visit(node.keyframes)+"}"},media:function(node){return"@media "+node.media+"{"+visit(node.rules)+"}"},namespace:function(node){return"@namespace "+node.name+";"},page:function(node){return"@page "+(node.selectors.length?node.selectors.join(", "):"")+"{"+visit(node.declarations)+"}"},"page-margin-box":function(node){return"@"+node.name+"{"+visit(node.declarations)+"}"},rule:function(node){var decls=node.declarations;if(decls.length)return node.selectors.join(",")+"{"+visit(decls)+"}"},supports:function(node){return"@supports "+node.supports+"{"+visit(node.rules)+"}"},container:function(node){return"@container "+node.container+"{"+visit(node.rules)+"}"}};function visit(nodes){for(var buf="",i=0;i<nodes.length;i++){var n=nodes[i],txt=(cb&&cb(n),renderMethods[n.type](n));txt&&(buf+=txt,txt.length)&&n.selectors&&(buf+=delim)}return buf}return visit(tree.stylesheet.rules)}balanced.range=range;var VAR_PROP_IDENTIFIER="--",VAR_FUNC_IDENTIFIER="var";function transformCss(cssData,argument_1){var settings=Object.assign({},{variables:{},onWarning:function(){}},1<arguments.length&&void 0!==argument_1?argument_1:{});!function walkCss(node,fn){node.rules.forEach(function(rule){rule.rules?walkCss(rule,fn):rule.keyframes?rule.keyframes.forEach(function(keyframe){"keyframe"===keyframe.type&&fn(keyframe.declarations,rule)}):rule.declarations&&fn(rule.declarations,node)})}((cssData="string"==typeof cssData?parseCss(cssData,settings):cssData).stylesheet,function(declarations,node){for(var i=0;i<declarations.length;i++){var decl=declarations[i],type=decl.type,prop=decl.property,value=decl.value;"declaration"===type&&(prop&&0===prop.indexOf(VAR_PROP_IDENTIFIER)?(declarations.splice(i,1),i--):-1!==value.indexOf(VAR_FUNC_IDENTIFIER+"(")&&(type=function resolveValue(value){var settings=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};var __recursiveFallback=2<arguments.length?arguments[2]:void 0;if(-1===value.indexOf("var("))return value;var valueData=balancedMatch("(",")",value);function resolveFunc(value){var name=value.split(",")[0].replace(/[\s\n\t]/g,""),fallback=(value.match(/(?:\s*,\s*){1}(.*)?/)||[])[1],match=Object.prototype.hasOwnProperty.call(settings.variables,name)?String(settings.variables[name]):void 0,fallback=match||(fallback?String(fallback):void 0),value=__recursiveFallback||value;return match||settings.onWarning('variable "'.concat(name,'" is undefined')),fallback&&"undefined"!==fallback&&0<fallback.length?resolveValue(fallback,settings,value):"var(".concat(value,")")}return valueData?"var"===valueData.pre.slice(-3)?0===valueData.body.trim().length?(settings.onWarning("var() must contain a non-whitespace string"),value):valueData.pre.slice(0,-3)+resolveFunc(valueData.body)+resolveValue(valueData.post,settings):valueData.pre+"(".concat(resolveValue(valueData.body,settings),")")+resolveValue(valueData.post,settings):(-1!==value.indexOf("var(")&&settings.onWarning('missing closing ")" in the value "'.concat(value,'"')),value)}(value,settings))!==decl.value&&(type=function(value){return(value.match(/calc\(([^)]+)\)/g)||[]).forEach(function(match){var newVal="calc".concat(match.split("calc").join(""));value=value.replace(match,newVal)}),value}(type),decl.value=type))}}),stringifyCss(cssData)}var counters={group:0,job:0},defaults={rootElement:document,include:"style,link[rel=stylesheet]",exclude:"",variables:{},silent:!1,updateURLs:!0,onBeforeSend:function(){},onError:function(){},onWarning:function(){},onSuccess:function(){},onComplete:function(){},onFinally:function(){}},regex={cssComments:/\/\*[\s\S]+?\*\//g,cssKeyframes:/@(?:-\w*-)?keyframes/,cssMediaQueries:/@media[^{]+\{([\s\S]+?})\s*}/g,cssUrls:/url\((?!['"]?(?:data|http|\/\/):)['"]?([^'")]*)['"]?\)/g,cssVarDeclRules:/(?::(?:root|host)(?![.:#(])[\s,]*[^{]*{\s*[^}]*})/g,cssVarDecls:/(?:[\s;]*)(-{2}\w[\w-]*)(?:\s*:\s*)([^;]*);/g,cssVarFunc:/var\(\s*--[\w-]/,cssVars:/(?:(?::(?:root|host)(?![.:#(])[\s,]*[^{]*{\s*[^;]*;*\s*)|(?:var\(\s*))(--[^:)]+)(?:\s*[:)])/},variableStore={dom:{},job:{},user:{}},cssVarsSrcNodeCount=0;function getFullUrl(url,argument_1){var base=1<arguments.length&&void 0!==argument_1?argument_1:location.href,d=document.implementation.createHTMLDocument(""),b=d.createElement("base"),a=d.createElement("a");return d.head.appendChild(b),d.body.appendChild(a),b.href=base,a.href=url,a.href}_exports.default=function(){var srcNodes,settings=Object.assign({},defaults,0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});function handleError(message,sourceNode,xhr,url){!settings.silent&&window.console&&console.error("".concat("cssVars(): ").concat(message,"\n"),sourceNode),settings.onError(message,sourceNode,xhr,url)}function handleWarning(message){!settings.silent&&window.console&&console.warn("".concat("cssVars(): ").concat(message)),settings.onWarning(message)}settings.__benchmark||(srcNodes=[].slice.call(settings.rootElement.querySelectorAll('[data-cssvars]:not([data-cssvars="out"])')),settings.__benchmark=((window.performance||{}).now?window.performance:Date).now(),settings.variables=function(){var varObj=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},reLeadingHyphens=/^-{2}/;return Object.keys(varObj).reduce(function(obj,value){return obj[reLeadingHyphens.test(value)?value:"--".concat(value.replace(/^-+/,""))]=varObj[value],obj},{})}(settings.variables),srcNodes.forEach(function(srcNode){var hasStyleCache="style"===srcNode.nodeName.toLowerCase()&&srcNode.__cssVars.text,hasStyleChanged=hasStyleCache&&srcNode.textContent!==srcNode.__cssVars.text;hasStyleCache&&hasStyleChanged&&(srcNode.sheet&&(srcNode.sheet.disabled=!1),srcNode.setAttribute("data-cssvars",""))}),[].slice.call(settings.rootElement.querySelectorAll('[data-cssvars="out"]')).forEach(function(outNode){var dataGroup=outNode.getAttribute("data-cssvars-group");(dataGroup?settings.rootElement.querySelector('[data-cssvars="src"][data-cssvars-group="'.concat(dataGroup,'"]')):null)||outNode.parentNode.removeChild(outNode)}),cssVarsSrcNodeCount&&srcNodes.length<cssVarsSrcNodeCount&&(cssVarsSrcNodeCount=srcNodes.length,variableStore.dom={})),getCssData({rootElement:settings.rootElement,include:settings.include,skipDisabled:!1,onBeforeSend:settings.onBeforeSend,onError:function(xhr,node,url){var url=xhr.responseURL||getFullUrl(url,location.href),statusText=xhr.statusText?"(".concat(xhr.statusText,")"):"Unspecified Error"+(0===xhr.status?" (possibly CORS related)":"");handleError("CSS XHR Error: ".concat(url," ").concat(xhr.status," ").concat(statusText),node,xhr,url)},onSuccess:function(cssText,node,url){var isLink,isStyleImport;return!((node.sheet||{}).disabled&&!node.__cssVars)&&(isLink="link"===node.nodeName.toLowerCase(),isStyleImport="style"===node.nodeName.toLowerCase()&&cssText!==node.textContent,cssText=void 0!==(node=settings.onSuccess(cssText,node,url))&&!1===Boolean(node)?"":node||cssText,settings.updateURLs&&(isLink||isStyleImport)?function(cssText,baseUrl){return(cssText.replace(regex.cssComments,"").match(regex.cssUrls)||[]).forEach(function(cssUrl){var oldUrl=cssUrl.replace(regex.cssUrls,"$1"),newUrl=getFullUrl(oldUrl,baseUrl);cssText=cssText.replace(cssUrl,cssUrl.replace(oldUrl,newUrl))}),cssText}(cssText,url):cssText)},onComplete:function(cssText,cssArray){var nodeArray=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],outCssArray=(Object.assign({},variableStore.dom,variableStore.user),variableStore.job={},nodeArray.forEach(function(node,i){i=cssArray[i];if(node.__cssVars=node.__cssVars||{},node.__cssVars.text=i,regex.cssVars.test(i))try{var cssTree=parseCss(i,{removeComments:!0});!function(cssData,argument_1){var settings=Object.assign({},{parseHost:!1,store:{},onWarning:function(){}},1<arguments.length&&void 0!==argument_1?argument_1:{}),reVarDeclSelectors=new RegExp(":".concat(settings.parseHost?"host":"root","$"));(cssData="string"==typeof cssData?parseCss(cssData,settings):cssData).stylesheet.rules.forEach(function(rule){"rule"===rule.type&&rule.selectors.some(function(s){return reVarDeclSelectors.test(s)})&&rule.declarations.forEach(function(decl,i){var prop=decl.property,decl=decl.value;prop&&0===prop.indexOf("--")&&(settings.store[prop]=decl)})}),settings.store}(cssTree,{parseHost:Boolean(settings.rootElement.host),store:variableStore.dom,onWarning:handleWarning}),node.__cssVars.tree=cssTree}catch(err){handleError(err.message,node)}}),Object.assign(variableStore.job,variableStore.dom),Object.assign(variableStore.user,settings.variables),Object.assign(variableStore.job,variableStore.user),[]),outNodeArray=[],hasKeyframesWithVars=!1;if(counters.job++,nodeArray.forEach(function(node,i){var isSkip=!node.__cssVars.tree;if(node.__cssVars.tree)try{transformCss(node.__cssVars.tree,Object.assign({},settings,{variables:variableStore.job,onWarning:handleWarning}));var dataGroup,outCssNoSpaces,outNode,outCss=stringifyCss(node.__cssVars.tree),nodeCSS=cssArray[i],hasCSSVarFunc=regex.cssVarFunc.test(nodeCSS);node.getAttribute("data-cssvars")||node.setAttribute("data-cssvars","src"),outCss.length&&hasCSSVarFunc&&(dataGroup=node.getAttribute("data-cssvars-group")||++counters.group,outCssNoSpaces=outCss.replace(/\s/g,""),outNode=document.createElement("style"),hasKeyframesWithVars=hasKeyframesWithVars||regex.cssKeyframes.test(outCss),node.sheet&&(node.sheet.disabled=!0),outNode.hasAttribute("data-cssvars")||outNode.setAttribute("data-cssvars","out"),outCssNoSpaces===node.textContent.replace(/\s/g,"")?(isSkip=!0,outNode&&outNode.parentNode&&(node.removeAttribute("data-cssvars-group"),outNode.parentNode.removeChild(outNode))):outCssNoSpaces!==outNode.textContent.replace(/\s/g,"")&&([node,outNode].forEach(function(n){n.setAttribute("data-cssvars-job",counters.job),n.setAttribute("data-cssvars-group",dataGroup)}),outNode.textContent=outCss,outCssArray.push(outCss),outNodeArray.push(outNode),outNode.parentNode||node.parentNode.insertBefore(outNode,node.nextSibling)))}catch(err){handleError(err.message,node)}isSkip&&node.setAttribute("data-cssvars","skip"),node.hasAttribute("data-cssvars-job")||node.setAttribute("data-cssvars-job",counters.job)}),cssVarsSrcNodeCount=settings.rootElement.querySelectorAll('[data-cssvars]:not([data-cssvars="out"])').length,hasKeyframesWithVars){var nodeArray=settings.rootElement,animationNameProp=["animation-name","-moz-animation-name","-webkit-animation-name"].filter(function(prop){return getComputedStyle(document.body)[prop]})[0];if(animationNameProp){for(var allNodes=nodeArray.getElementsByTagName("*"),keyframeNodes=[],i=0,len=allNodes.length;i<len;i++){var node=allNodes[i];"none"!==getComputedStyle(node)[animationNameProp]&&(node.style[animationNameProp]+="__CSSVARSPONYFILL-KEYFRAMES__",keyframeNodes.push(node))}document.body.offsetHeight;for(var _i=0,_len=keyframeNodes.length;_i<_len;_i++){var nodeStyle=keyframeNodes[_i].style;nodeStyle[animationNameProp]=nodeStyle[animationNameProp].replace("__CSSVARSPONYFILL-KEYFRAMES__","")}}}settings.onComplete(outCssArray.join(""),outNodeArray,JSON.parse(JSON.stringify(variableStore.job))),nodeArray=outNodeArray.length,settings.onFinally(Boolean(nodeArray))}})}});