define(["exports","./../common/inputmanager.js","./../common/servicelocator.js"],function(_exports,_inputmanager,_servicelocator){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0;var hidInput={requestCount:0},_COMPATIBLE_PRODUCT_IDs=[{vendorId:1118,productId:109},{vendorId:1118,productId:160},{vendorId:1118,productId:218},{vendorId:4219,productId:12297},{vendorId:5385,productId:37442},{vendorId:1006,productId:9473},{vendorId:1137,productId:2069},{vendorId:1545,productId:797},{vendorId:8256,productId:25360},{vendorId:4105,productId:14},{vendorId:4121,productId:3896},{vendorId:1011,productId:148},{vendorId:4024,productId:2},{vendorId:1256,productId:28769},{vendorId:5216,productId:37200},{vendorId:1006,productId:9474},{vendorId:1545,productId:802},{vendorId:4872,productId:49153},{vendorId:1896,productId:35},{vendorId:1137,productId:1544},{vendorId:1086,productId:38915},{vendorId:6045,productId:16},{vendorId:6045,productId:32},{vendorId:6020,productId:1},{vendorId:6020,productId:2},{vendorId:6072,productId:4352},{vendorId:6072,productId:1100},{vendorId:6072,productId:1200},{vendorId:5553,productId:32912},{vendorId:5242,productId:57365},{vendorId:5242,productId:57366},{vendorId:1308,productId:49153},{vendorId:1308,productId:49154},{vendorId:3094,productId:129},{vendorId:3094,productId:128},{vendorId:16700,productId:33059},{vendorId:16700,productId:33060},{vendorId:1033,productId:102},{vendorId:1137,productId:1548},{vendorId:1137,productId:1549},{vendorId:1137,productId:1551},{vendorId:1204,productId:19559},{vendorId:1259,productId:57346},{vendorId:1259,productId:57348},{vendorId:1545,productId:820},{vendorId:1545,productId:824},{vendorId:2632,productId:12930},{vendorId:3034,productId:353},{vendorId:3034,productId:360},{vendorId:5242,productId:57367},{vendorId:5242,productId:57368},{vendorId:5242,productId:57396},{vendorId:5242,productId:57399},{vendorId:5242,productId:57402},{vendorId:5242,productId:57404},{vendorId:6020,productId:8},{vendorId:6020,productId:6},{vendorId:6452,productId:1538},{vendorId:6452,productId:1794},{vendorId:7012,productId:312}];function handleInputReport(e){if("hidden"!==(doc=document).visibilityState&&doc.hasFocus()){var doc;if(3===e.reportId&&0<e.data.byteLength)switch(e.data.getUint8(0)){case 13:_inputmanager.default.trigger("home");break;case 75:_inputmanager.default.trigger("togglefullscreen");break;case 76:_inputmanager.default.trigger("changeaudiotrack");break;case 36:_inputmanager.default.trigger("movies");break;case 77:_inputmanager.default.trigger("changesubtitletrack");break;case 71:_inputmanager.default.trigger("music");break;case 73:_inputmanager.default.trigger("pictures");break;case 70:_inputmanager.default.trigger("livetv");break;case 74:_inputmanager.default.trigger("videos");break;case 128:case 129:_inputmanager.default.trigger("settings");break;case 72:_inputmanager.default.trigger("recordedtv");break;case 37:_inputmanager.default.trigger("nowplaying");break;case 39:_inputmanager.default.trigger("changezoom");break;case 90:_inputmanager.default.trigger("changesubtitletrack");break;case 91:_inputmanager.default.trigger("red");break;case 92:_inputmanager.default.trigger("green");break;case 93:_inputmanager.default.trigger("yellow");break;case 94:_inputmanager.default.trigger("blue")}if(2===e.reportId&&0<e.data.byteLength)switch(e.data.getUint8(0)){case 130:_servicelocator.appHost.sleep();break;case 9:_inputmanager.default.trigger("info");break;case 141:_inputmanager.default.trigger("guide");break;case 156:_inputmanager.default.trigger("channelup");break;case 157:_inputmanager.default.trigger("channeldown");break;case 176:_inputmanager.default.trigger("play");break;case 178:_inputmanager.default.trigger("record");break;case 179:_inputmanager.default.trigger("fastforward");break;case 180:_inputmanager.default.trigger("rewind")}}}function openDevice(device){device.opened?onDeviceOpened(device):device.open().then(function(){return onDeviceOpened(device)})}function onDeviceOpened(device){hidInput.isConnected=!0,console.info("Opened device: "+device.productName),device.addEventListener("inputreport",handleInputReport)}function isSupported(){return navigator&&!!navigator.hid}navigator&&navigator.hid&&(navigator.hid.addEventListener("connect",function(e){console.info("HID Device connected: "+e.device.productName),hidInput.isConnected=!0}),navigator.hid.addEventListener("disconnect",function(e){console.info("HID Device disconnected: "+e.device.productName),hidInput.isConnected=!1})),hidInput.shouldTryConnect=function(){return isSupported()&&!hidInput.isConnected},hidInput.tryConnect=function(){if(isSupported()&&!hidInput.isConnected){var currentDevices=navigator.hid.getDevices();if(0<currentDevices.length){currentDevices=currentDevices[0];if(currentDevices)return void openDevice(currentDevices)}navigator.hid.requestDevice({filters:_COMPATIBLE_PRODUCT_IDs}).then(function(devices){0===devices.length?hidInput.requestCount++:openDevice(devices[0])})}},hidInput.isSupported=isSupported;_exports.default=hidInput});